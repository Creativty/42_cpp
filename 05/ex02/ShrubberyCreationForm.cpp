/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   ShrubberyCreationForm.cpp                          :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: aindjare <marvin@42.fr>                    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2025/07/08 15:53:31 by aindjare          #+#    #+#             */
/*   Updated: 2025/07/08 16:19:04 by aindjare         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "ShrubberyCreationForm.hpp"
#include <cstdlib>
#include <fstream>
#include <iostream>

ShrubberyCreationForm::ShrubberyCreationForm(const std::string& target)
	: AForm("ShrubberyCreation", 145, 137), target(target) {
	if (this->target.empty())
		this->target = "unnamed";
}

ShrubberyCreationForm::ShrubberyCreationForm(const ShrubberyCreationForm& instance)
	: AForm("ShrubberyCreation", 145, 137), target(instance.getTarget()) { }

ShrubberyCreationForm&	ShrubberyCreationForm::operator=(const ShrubberyCreationForm& instance) {
	this->target = instance.getTarget();
	return (*this);
}

ShrubberyCreationForm::~ShrubberyCreationForm() { }

const std::string&	ShrubberyCreationForm::getTarget(void) const {
	return (this->target);
}

void				ShrubberyCreationForm::beExecuted(void) const {
	const char			*ART[] = {
		"	                                              .\n"
		"                                   .         ;\n"
		"      .              .              ;%     ;;\n"
		"        ,           ,                :;%  %;\n"
		"         :         ;                   :;%;'     .,\n"
		",.        %;     %;            ;        %;'    ,;\n"
		"  ;       ;%;  %%;        ,     %;    ;%;    ,%'\n"
		"   %;       %;%;      ,  ;       %;  ;%;   ,%;'\n"
		"    ;%;      %;        ;%;        % ;%;  ,%;'\n"
		"     `%;.     ;%;     %;'         `;%%;.%;'\n"
		"      `:;%.    ;%%. %@;        %; ;@%;%'\n"
		"         `:%;.  :;bd%;          %;@%;'\n"
		"           `@%:.  :;%.         ;@@%;'\n"
		"             `@%.  `;@%.      ;@@%;\n"
		"               `@%%. `@%%    ;@@%;\n"
		"                 ;@%. :@%%  %@@%;\n"
		"                   %@bd%%%bd%%:;\n"
		"                     #@%%%%%:;;\n"
		"                     %@@%%%::;\n"
		"                     %@@@%(o);  . '\n"
		"                     %@@@o%;:(.,'\n"
		"                 `.. %@@@o%::;\n"
		"                    `)@@@o%::;\n"
		"                     %@@(o)::;\n"
		"                    .%@@@@%::;\n"
		"                    ;%@@@@%::;.\n"
		"                   ;%@@@@%%:;;;.\n"
		"               ...;%@@@@@%%:;;;;,..    Gilo97\n",
		"                                         ..................=@                                       \n"
		"                                    =............................=                                  \n"
		"                                 ...................................@                               \n"
		"                                ......................................=                             \n"
		"                              ..........................................=                           \n"
		"                             =............................................                          \n"
		"                            ===...........................................=                         \n"
		"                          @====.............................................                        \n"
		"                       @========.............................................                       \n"
		"                   ==============.............................................@                     \n"
		"                ==================...............................................@                  \n"
		"              ========..============...................................====.........                \n"
		"             ======.......============................................=====..........@              \n"
		"            ======...........==========...............................=====:..........=             \n"
		"           ======....................................................======.............            \n"
		"           =====....................................................=======...........===           \n"
		"          ======..................................................========............===@          \n"
		"          ======.................................................=========............====@         \n"
		"          ======.............====..............................==========............======         \n"
		"          ======.............=======........................===========:............=======         \n"
		"          =======............============.............:===============.............========         \n"
		"          @=======..............====================================..............=========         \n"
		"           ========...............================================.............============         \n"
		"           ==========................===========================:...........==============@         \n"
		"            @===========..............====================================================          \n"
		"              ==============.........====================@@==============================           \n"
		"               ======================@@===========@@@@@@@@@=============================@           \n"
		"               =================@@@@@@@@==========@@@@@@@@@============================@            \n"
		"               ===================@@@@@@@@========@@@@@@@@============================              \n"
		"               @===================@@@@@@@@@=====@@@@@@@@@===========================               \n"
		"                 ====================@@@@@@@@#===@@@@@@@@@=========================@                \n"
		"                  ====================@@@@@@@@@==@@@@@@@@========================                   \n"
		"                    ====================@@@@@@@@@@@@@@@@@======================                     \n"
		"                       ==================@@@@@@@@@@@@@@@@===@@@@@@@@=======                         \n"
		"                          @================@@@@@@@######@@@@@@@@@@@@                                \n"
		"                                @========  @@@@##########@@@@@@@@@@                                 \n"
		"                                            ############@@@@@@@@@                                   \n"
		"                                            #############@@@@@@@                                    \n"
		"                                            #############@@@@@                                      \n"
		"                                            #############@@@@                                       \n"
		"                                            #############@@                                         \n"
		"                                            #############@                                          \n"
		"                                           @##############                                          \n"
		"                                           @#############@                                          \n"
		"                                           @##############                                          \n"
		"                                           @##############                                          \n"
		"                                           ###############                                          \n"
		"                                           ##############@                                          \n",
		"                                           @#############@\n",
		"       _-_\n"
		"    /~~   ~~\\\n"
		" /~~         ~~\\\n"
		"{               }\n"
		" \\  _-     -_  /\n"
		"   ~  \\\\ //  ~\n"
		"_- -   | | _- _\n"
		"  _ -  | |   -_\n"
		"      // \\\\\n",
		"		                                                         .\n"
		"                                              .         ;  \n"
		"                 .              .              ;%     ;;   \n"
		"                   ,           ,                :;%  %;   \n"
		"                    :         ;                   :;%;'     .,   \n"
		"           ,.        %;     %;            ;        %;'    ,;\n"
		"             ;       ;%;  %%;        ,     %;    ;%;    ,%'\n"
		"              %;       %;%;      ,  ;       %;  ;%;   ,%;' \n"
		"               ;%;      %;        ;%;        % ;%;  ,%;'\n"
		"                `%;.     ;%;     %;'         `;%%;.%;'\n"
		"                 `:;%.    ;%%. %@;        %; ;@%;%'\n"
		"                    `:%;.  :;bd%;          %;@%;'\n"
		"                      `@%:.  :;%.         ;@@%;'   \n"
		"                        `@%.  `;@%.      ;@@%;         \n"
		"                          `@%%. `@%%    ;@@%;        \n"
		"                            ;@%. :@%%  %@@%;       \n"
		"                              %@bd%%%bd%%:;     \n"
		"                                #@%%%%%:;;\n"
		"                                %@@%%%::;\n"
		"                                %@@@%(o);  . '         \n"
		"                                %@@@o%;:(.,'         \n"
		"                            `.. %@@@o%::;         \n"
		"                               `)@@@o%::;         \n"
		"                                %@@(o)::;        \n"
		"                               .%@@@@%::;         \n"
		"                               ;%@@@@%::;.          \n"
		"                              ;%@@@@%%:;;;. \n"
		"                          ...;%@@@@@%%:;;;;,..    Gilo97\n",
		"                             ; ; ;\n"
		"                   ;        ;  ;     ;;    ;\n"
		"                ;                 ;         ;  ;\n"
		"                                ;\n"
		"                               ;                ;;\n"
		"               ;          ;            ;              ;\n"
		"               ;            ';,        ;               ;\n"
		"               ;              'b      *\n"
		"                ;              '$    ;;                ;;\n"
		"               ;    ;           $:   ;:               ;\n"
		"             ;;      ;  ;;      *;  @):        ;   ; ;\n"
		"                          ;     :@,@):   ,;**:'   ;\n"
		"              ;      ;,         :@@*: ;;**'      ;   ;\n"
		"                       ';o;    ;:(@';@*\"'  ;\n"
		"               ;  ;       'bq,;;:,@@*'   ,*      ;  ;\n"
		"                          ,p$q8,:@)'  ;p*'      ;\n"
		"                   ;     '  ; '@@Pp@@*'    ;  ;\n"
		"                    ;  ; ;;    Y7'.'     ;  ;\n"
		"                              :@):.\n"
		"                             .:@:'.\n"
		"                           .::(@:.      -Sam Blumenstein-\n",
	};
	const unsigned long	ART_COUNT = sizeof(ART) / sizeof(const char *);
	
	std::string		name(this->target + "_shrubbery");
	std::ofstream	file(name.c_str(), std::ios_base::app);

	if (file.good()) {
		file << ART[rand() % (int)ART_COUNT];
	} else {
		std::cerr << "could not open/write the file " << name << std::endl;
	}
}
